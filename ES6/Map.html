<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Map数据结构</title>
</head>
<body>
    <button onclick="func()">Map数据结构</button>
    <script>
        function func(){
            //  Map数据结构，它类似于对象，也是键值对的集合，但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当做键。
            //  也就是说，Object结构提供了“字符串—值”的对应，Map结构提供了“值—值”的对应。

            const map = new Map([
                ['name','张三'],
                ['title','Author']
            ]);
            map.size;    // 2
            map.has('name');     //true
            map.get('name');     // "张三"
            map.has('title');     //true
            map.get('title');     // "Author"


            let map1 = new Map();
            let arr = ['123'];
            map1.set(arr,'456');
            console.log(map1, map1.get(arr));      // { ['123'] => '456' }  ,  "456"


            let map2 = new Map([['a',123],['b',456]]);
            console.log(map2);           // { "a" => 123, "b" => 456 }
            console.log(map2.size);      //  2
            console.log('123' + map2.delete('a'));    // 123true
            console.log(map2);           //  { "b" => 456 }
            map2.clear();
            console.log(map2);            // { }


            /* (2)WeakMap： 只接受对象作为键名（null除外），不接受其他类型的值作为键名。
                    WeakMap的键名所引用的对象都是弱引用，即垃圾回收机制不将改引用考虑在内。
                    WeakMap与Map在API上的区别主要是两个：
                        一 是没有遍历操作（即没有key()、values()和entries()方法），也没有size属性。
                            因为没有办法列出所有键名，某个键名是否存在完全不可预测，跟垃圾回收机制是否运行相关。这一刻可以取到键名，下一口味垃圾回收机制突然运行了，这个键名就没了，为了防止出现不确定性，就统一规定不能取到键名。
                        二 是无法清空，即不支持clear()方法。
                     因此，WeakMap只有四个方法可用：get()、set()、has()、delete()。
            */
            let weakmap = new WeakMap();    // 没有clear、set方法，不能遍历
            let o = { };
            weakmap.set(o,123);
            console.log(weakmap.get(o));   // 123
        }
    </script>
</body>
</html>